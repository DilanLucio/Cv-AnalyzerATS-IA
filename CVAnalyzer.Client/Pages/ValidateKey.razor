@page "/validate-key"

<h3>Validar API Key</h3>

<div class="form-group">
    <input @bind="ApiKey" placeholder="Ingresa tu API Key de OpenAI" class="form-control" />
</div>
<div class="mt-2">
    <button class="btn btn-primary" @onclick="OnValidateKey">Validar</button>
</div>

<p class="mt-3">@ResultMessage</p>

@code {
    private string ApiKey { get; set; } = string.Empty;
    private string ResultMessage { get; set; } = string.Empty;

    private async Task OnValidateKey()
    {
        try
        {
            using var client = new HttpClient();
            var content = new StringContent(ApiKey);
            var response = await client.PostAsync("http://localhost:5219/validate-key", content);

            if (response.IsSuccessStatusCode)
                ResultMessage = "✅ API Key válida";
            else
                ResultMessage = "❌ API Key inválida";
        }
        catch
        {
            ResultMessage = "⚠ Error al conectar con el servidor";
        }
    }
}
